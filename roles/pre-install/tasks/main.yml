---
- name: Auto start SSH
  service:
    name: ssh
    enabled: yes

- name: Disable GUI at boot time
  command: raspi-config nonint do_boot_behaviour B1
  become: true

- name: Install mandatory packages
  apt:
    name:
      - vim
      - software-properties-common
      - build-essential
      - powerline
      - fonts-powerline
      - silversearcher-ag

# UUID from `blkid`
- name: auto mount data disk
  mount:
    path: "{{ mount_point }}"
    src: UUID={{ disk_uuid }}
    fstype: ext4
    opts: defaults
    state: mounted
  tags: fstab

- name: set hard drive rights
  file:
    path: "{{ mount_point }}"
    state: directory
    mode: u=rwX,g=rX,o=rX
  tags: fstab
